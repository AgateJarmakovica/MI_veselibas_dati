# =====================================================================
# Universālā datu kvalitātes konfigurācija (AI-driven rules.yml)
# ---------------------------------------------------------------------
# Šis fails vairs nedefinē konkrētus laukus.
# Tā vietā nosaka MI mācīšanās un noteikumu ģenerēšanas principus.
# =====================================================================

metadata:
  project: "healthdq-ai"
  author: "Agate Jarmakoviča"
  version: "2.0"
  created: "2025-10-30"
  description: >
    AI-driven framework for adaptive data quality improvement
    across arbitrary datasets using schema understanding and rule generation.

# ---------------------------------------------------------------------
# AI CONFIGURATION
# ---------------------------------------------------------------------
ai_schema_learning:
  enabled: true
  model_name: "sentence-transformers/all-MiniLM-L6-v2"
  outputs:
    learned_schema: "out/ai_learned_schema.json"
    suggested_rules: "out/rules_suggested.yml"

# ---------------------------------------------------------------------
# RULE GENERATION STRATEGY
Batini & Scannapieco (2016) “Data and Information Quality”
Wand & Wang (1996) “Anchoring Data Quality Dimensions in Ontological Foundations”
# ---------------------------------------------------------------------
rule_generation:
  enabled: true
  based_on:
    - schema_structure       # kolonnu nosaukumi un tipi
    - statistical_discovery  # vērtību sadalījums, min/max, uniqueness
    - semantic_similarity    # semantiskā tuvība zināmiem konceptiem
  thresholds:
    correlation: 0.8
    similarity: 0.75
  max_rules_per_column: 5
  output: "out/rules_generated.yml"

# ---------------------------------------------------------------------
# COMPLETENESS / IMPUTATION STRATEGY
# ---------------------------------------------------------------------
imputation:
  detect_missing: true
  methods:
    numerical: median
    categorical: mode
    datetime: interpolate
    auto: true  # ļauj modelim izvēlēties metodi
  ai_support:
    enabled: true
    model_name: "microsoft/phi-2"  # piemēram, mazo LLM, kas paredz trūkstošās vērtības

# ---------------------------------------------------------------------
# METRIC SYSTEM (dynamic)
# ---------------------------------------------------------------------
metrics:
  general:
    - name: completeness_rate
      type: dynamic_not_null_rate
      columns: all

    - name: anomaly_rate
      type: ai_detected_anomalies
      source: ai_schema_learning

    - name: consistency_index
      type: logical_coherence
      compute_from: rules_generated.yml

    - name: reusability_index
      type: semantic_alignment
      model: "sentence-transformers/all-MiniLM-L6-v2"

